<div class="mt-3 ml-5 mb-3">

  <% if @user.buddies.count == 0 %>
  <p class="mt-3">You don't have any buddies yet!</p>
  <p class="mb-5">Let's fix that!</p>
  <%= link_to "Find a buddy", users_path, class: "button-purple"%>
  <% else %>
  <div class="d-flex flex-start" data-controller="chat">
    <div>
      <h6 class="my-1" style="color: #FFA024;">YOUR BUDDIES&nbsp; &nbsp;<i class="far fa-hand-point-left" style="color: #FFA024; font-size: 18px;"></i></h6>
      <br>
      <% @user.buddies.each do |user| %>
      <%= render 'shared/buddies_card', user: user %>
      <%# BELOW HERE IS CODE FOR CHAT  %>
      <% end %>
    </div>
    <div class="container-chat ml-5 border">
        <% match = @user.find_match(@buddy) %>
      <div id="messages" data-chatroom-id="<%= match[0].id %>">
        <% match[0].messages.each do |message| %>
        <%# Current messages %>
        <%= render 'messages/message', message: message %>
        <% end %>
        <%# Chat entry field %>
        <%= simple_form_for [ @user, match[0], @message ], remote: true, wrapper: :inline_form, html: { class: 'form-inline' } do |f| %>
        <%= f.input :content, label: false, placeholder: "Message ##{User.find(@buddy.id).name}", class: "form-inline" %>
        <%= f.submit 'Submit', class: "ml-2 button-chat", style: "margin-bottom: 21px" %>
        <% end %>
        <%# ABOVE HERE IS CODE FOR CHAT %>
      </div>
    <% end %>
    </div>
  </div>
</div>
