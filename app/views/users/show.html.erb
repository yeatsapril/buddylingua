<div class="container-fluid">
  <div class="row mb-3">
    <%# left column %>
    <div class="card p-5 mt-5 ml-5 bg-white rounded text-center" style="height:765px; border-right: 4px solid rgba(191, 191, 191, 0.2); border-bottom: none; border-top: none; border-left: none;">
     <div>
       <% if @user.photo.attached? %>
       <%= image_tag @user.photo, class: "avatar avatar-large-profile", alt: "avatar", style: 'object-fit: cover;' %>
       <% else %>
       <%= image_tag "https://kitt.lewagon.com/placeholder/users/sarahlafer", class: "avatar avatar-large", alt: "avatar" %>
       <% end %>
       <p class="mt-3">
        <strong style="font-size: 24px;"><%= @user.name.capitalize %>,</strong>
        <span style="font-size: 20px;"><%= @user.age %></span>
        <span><%= render "shared/flag", language: "#{@native_language}", flag_class: "flag-big"%></span>
        <p class="pb-3" style="">Here to learn <%= @target_language %>
          <span><%= render "shared/flag", language: "#{@target_language}", flag_class: "flag-small"%></span></p>
        </p>
        <hr style="background-color:#FFA024; height:5px; width:40px; margin: auto; border-radius: 7px 7px 7px 7px;">
        <br>

        <div style="background-color: white" class="mt-2">
          <div>
            <p> <%= @user.email %> </p>
            <p> <%= @user.address %> </p>


              <% if @user != current_user && !current_user.buddies.include?(@user) %>
                <div>
                  <%=link_to "Add Buddy", user_matches_path(@user, @match), class: "button-orange", style:"margin.top: 100px;", method: :post %>
                </div>
                <br>
                <div>
                  <%=link_to "Back", users_path, class: "button-orange", style:"margin.top: 100px;" %>
                </div>
              <% end %>
          </div>
        </div>
      </div>
    </div>

    <%# right column %>


    <%# content %>

    <div class="col-8 mt-5 pr-5">
      <div class="card col-md-8 pl-5 pr-5 rounded border-0">
        <ul class="nav nav-tabs mb-3" data-controller="tabs" id="myTab" role="tablist">
          <li class="nav-item">
            <% if @user == current_user %>
            <a class="nav-link active" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="true"><strong>MY PROFILE</strong></a>
            <% else %>
            <!-- if we're on a potential buddy profile, we don't need to show any tabs -->
          </li>
          <% end %>
          <% if @user == current_user %>
          <li class="nav-item">
            <a class="nav-link" id="buddies-tab" data-toggle="tab" href="#buddies" role="tab" aria-controls="buddies" aria-selected="true"> <strong>BUDDIES</strong></a>
          </li>
          <% end %>
        </ul>
      </div>

      <div class="tab-content">
        <div class="tab-pane active" id="profile" role="tabpanel" aria-label="profile-tab">
          <div class="mt-3 ml-5 mb-3">
            <% if @user.description.nil?%>
              <h6 class="o-2">SELF INTRODUCTION</h6>
              <p class="mt-3">Tell us more about yourself!&nbsp; &nbsp;<%= link_to "<span><i class='fas fa-plus-circle' style='color: #1ED346; font-size: 20px;'></i></span>".html_safe, edit_user_path(@user) %></p>
            <% elsif @user == current_user %>
              <h6 class="o-2">SELF INTRODUCTION&nbsp; &nbsp; <%= link_to "<span><i class='fas fa-plus-circle' style='color: #1ED346; font-size: 20px;'></i></span>".html_safe, edit_user_path(@user) %></h6>
              <%= @user.description %>
            <% elsif @user != current_user %>
              <h6 class="o-2">SELF INTRODUCTION&nbsp; &nbsp;</h6>
              <%= @user.description %>
            <% end %>
          </div>
          <br>

          <div class="ml-5 my-3">
            <h6 class="o-2 my-4">SPEAKS</h6>
            <span class="green-bold"><%= @native_language.capitalize %></span> <%= render "shared/flag", language: "#{@native_language}", flag_class: "flag-small" %>
          </div>
          <br>

          <div class="ml-5">
            <% if @user.description.nil? %>
              <h6 class="o-2 my-4">INTERESTS</h6>
              <p class="mt-3">Add your interests and help us to find the ideal buddy for you!&nbsp; &nbsp;<%= link_to "<span><i class='fas fa-plus-circle' style='color: #1ED346; font-size: 20px;'></i></span>".html_safe, edit_user_path(@user) %></p>
            <% elsif @user == current_user %>
              <h6 class="o-2 my-4">INTERESTS&nbsp; &nbsp;<%= link_to "<span><i class='fas fa-plus-circle' style='color: #1ED346; font-size: 20px;'></i></span>".html_safe, edit_user_path(@user) %></h6>
              <%= render 'shared/interests_grey_boxes', interests: @interests %>
            <% elsif @user != current_user %>
              <h6 class="o-2 my-4">INTERESTS&nbsp; &nbsp; </h6>
              <%= render 'shared/interests_grey_boxes', interests: @interests %>
            <% end %>
          </div>
          <br>

          <div class="ml-5">
            <h6 class="o-2 my-4">WANTS TO LEARN</h6>
            <span class="grey-box-list"><%= @target_language %> <%= render "shared/flag", language: "#{@target_language}", flag_class: "flag-small" %> </span>
          </div>
        </div>

        <%# buddies tab %>
        <div class="tab-pane" id="buddies" role="tabpanel" aria-label="buddies-tab">
            <%# buddies cards and the chat are in this partial folder %>
            <%= render 'shared/tab_items', user: @user %>
        </div>
      </div>
    </div>
  </div>
</div>
